
@{
    Layout = null;
}

<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>layui.form小例子</title>
   <style type="text/css">
       #InfoDiv {
           text-align: center; /*让div内部文字居中*/
           background-color: #fff;
           border-radius: 20px;
           width: 300px;
           height: 350px;
           margin: auto;
           position: absolute;
           top: 0;
           left: 0;
           right: 300px;
           bottom: 180px;
       }

   </style>
</head>
<body>
    <script src="~/Content/Scripts/jquery/jquery-2.1.1.min.js"></script>
    <script src="~/Content/layui/layui.js"></script>
    <link href="~/Content/layui/css/layui.css" rel="stylesheet" />
    <script>

        $(function () {

            //btnOK
            var job = "";
            var sex = "1";
            var address = "";
            layui.use(['form', 'laydate'], function () {


                var form = layui.form;
                var laydate = layui.laydate;


                form.on('select(aihao)', function (data) {
                    job = data.elem[data.elem.selectedIndex].text;
                    form.render('select');
                });
                form.on('select(diqu)', function (data) {
                    address = data.elem[data.elem.selectedIndex].text;
                    form.render('select');
                });
                form.on('radio(sex)', function (data) {
                    //得到radio原始DOM对象
                    sex = data.value;
                    layer.msg(sex)//被点击的radio的value值
                });
                //执行一个laydate实例
                laydate.render({
                    elem: '#test1' //指定元素
                });

                form.on('submit(btnOK)', function (data) {
                    var name = $("#txtname").val();
                    var time = $("#test1").val();
                    var InputText = $("#InputText").val();
                    $.ajax({
                        url: '/User/UpdataUser',
                        type: 'post',
                        dataType: 'json',
                        data: { loginname: name, time: time, InPut: InputText, job: job, sex: sex, address: address },
                        success: function (data) {
                            $("#txtname").val("");
                            $("#test1").val("");
                            $("#InputText").val("");
                            layer.msg(data.Msg)

                        }, error: function (data) {

                            layer.msg(data.Msg)
                        }
                    })
                    return false;//只此一句
                })

                form.verify({
                    username: function (value, item) { //value：表单的值、item：表单的DOM对象
                        var str = "";

                        if (/(^\_)|(\__)|(\_+$)/.test(value)) {
                            str = '用户名首尾不能出现下划线\'_\'';
                        }
                        return str;
                    }
                });

            });
        })
    </script>
    <div id="InfoDiv">
        <form class="layui-form">
            <!-- 提示：如果你不想用form，你可以换成div等任何一个普通元素 -->
            <div class="layui-form-item" style="width:500px;">
                <label class="layui-form-label" lay-verify="username">昵称</label>
                <div class="layui-input-block">
                    <input type="text" name="" id="txtname" placeholder="请输入" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" style="width:500px;">
                <label class="layui-form-label">职业</label>
                <div class="layui-input-block">
                    <select name="interest" lay-filter="aihao">
                        <option value="0">老师</option>
                        <option value="1">学生</option>
                        <option value="2">国家主席</option>
                    </select>
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">单选框</label>
                <div class="layui-input-block">
                    <input type="radio" name="sex" value="0" title="男" lay-filter="sex">
                    <input type="radio" name="sex" value="1" title="女" lay-filter="sex" checked>
                </div>
            </div>
            <div class="layui-form-item" style="width:500px;">
                <label class="layui-form-label">生日</label>
                <div class="layui-input-block">
                    <input type="text" class="layui-input" id="test1">
                </div>
            </div>
            <div class="layui-form-item" style="width:500px;">
                <label class="layui-form-label">地区</label>
                <div class="layui-input-block">
                    <select name="interest" lay-filter="diqu">
                        <option value="0">湖北</option>
                        <option value="1">湖南</option>
                        <option value="1">上海</option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item layui-form-text" style="width:500px;">
                <label class="layui-form-label">个性签名</label>
                <div class="layui-input-block">
                    <textarea placeholder="请输入内容" id="InputText" class="layui-textarea"></textarea>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" id="btnOK" lay-submit lay-filter="btnOK">保存</button>
                    <button type="reset" style="margin-left:50px;" class="layui-btn layui-btn-primary">重置</button>
                </div>
            </div>
            <!-- 更多表单结构排版请移步文档左侧【页面元素-表单】一项阅览 -->
        </form>
    </div>

</body>
        </html>
    