
@{
    Layout = null;
}
<!DOCTYPE html>

<html>
<head>

    <meta name="viewport" content="width=device-width" />
    <link href="~/Content/layui/css/layui.css" rel="stylesheet" />
    <script src="~/Content/Scripts/jquery/jquery-1.8.2.min.js"></script>
    <script src="~/Content/layui/layui.js"></script>

    <title>ImgList</title>
    <style type="text/css">
        .imglist {
            width: 270px;
            height: 300px;
            color: greenyellow;
            cursor: pointer;
            float: left;
            margin-left: 50px;
            margin-top: 20px;
           
        }
        .textlist {
            width: 100%;
            height: 65px;
         
            position: relative;
            top: -66px;
            background-color: rgba(0,0,0,0.5);
        }
            .textlist .leftdiv {
                width: 70%;
                float: left;
                height: 30px;
               
                
            }

            .textlist .leftdiv  div {
                width: 100%;
                padding-left:20px;
              line-height:30px;
              
            }
            .textlist .rightdiv {
                width: 28%;
                float: left;
                height: 100%;
                text-align:center;
                font-size:55px;
                color:rgb(255, 255, 255);
                margin-top:-2px;
                
            }
            .imglist a {
                color: red;
                text-decoration: none;
            }

        .imglist img {
            z-index: -10;
        }
        .layui-flow-more {
             
            float:left;
            margin-left:46%
        }
    </style>

    <script>

        $(function () {


            layui.use('flow', function () {
                var flow = layui.flow;

                flow.load({
                    elem: '#LAY_demo1' //流加载容器
                    , scrollElem: '#LAY_demo1' //滚动条所在元素，一般不用填，此处只是演示需要。
                    , done: function (page, next) { //执行下一页的回调
                        $.ajax({
                            type: "POST",
                            dataType: 'text',
                            url: "/Home/GetPageImgList",
                            data: { Page: page },
                            success: function (data) {

                                var datajson = JSON.parse(data);
                                var lis = [];
                                
                                for (var i = 0; i < datajson.length; i++) {
                                    var html = "<li  style='float:left;' class='imglist'onclick=onchangimg('" + datajson[i].Id+"')>";
                                    html += "<img  src='/" + datajson[i].fisrtImg +"' width='100%'; height='100%;'/>"
                                    html += "<div class='textlist'><div class='leftdiv'><div>相册分类: <a href='javascript: void (0)'>" + datajson[i].TypeName + "</a></div>" ;

                                    html += "<div >相册名称: <a href='javascript: void (0)'>" + datajson[i].Name + "</a></div>";
                                    html += "</div><div class='rightdiv'>" + datajson[i].ImgCount + "</div></div></li>";    
                                  
                                    lis.push(html)
                                }

                                lis.push("  <div style='clear: both;'></div>")
                           
                                //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                                //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                                next(lis.join(''), page < (datajson[0].COUNTNUM/8)-1);//假设总页数为 10
                                //模拟数据插入

                            }, error: function (data) {
                                alert(data.data)
                            }
                        })
                        //模拟数据插入
                       
                    }
                });
            })
        })
        function onchangimg(id) {
           
            location.href = "/Home/ImgListModel/" + id;
        }

    </script>
</head>
<body>

    <ul class="flow-default" id="LAY_demo1"></ul>
   

</body>
</html>
